name: latentscore
channels:
  - conda-forge
dependencies:
  - python=3.10
  - pip
  - pip:
    # Core Numerics (Install via pip to ensure binary compatibility with MLX/Torch)
    - numpy
    - scipy
    
    # Audio
    - soundfile
    - sounddevice
    - simpleaudio
    
    # LLM, MLX
    - mlx>=0.22
    - mlx-lm>=0.22
    - llm-structured-output
    - "outlines[mlxlm]"
    - transformers<5
    - huggingface_hub>=0.20
    - sentencepiece
    - litellm
    - json-repair
    
    # Embeddings
    - sentence-transformers
    - torch
    - scikit-learn
    
    # UI
    - textual>=0.58
    - textual-serve>=1.0
    - rich
    - pywebview>=4.4
    - rumps>=0.4
    - pyinstaller
    
    # Utils
    - dependency-injector>=4.42
    - pyperclip>=1.8
    - python-dotenv
    
    # Dev
    - pyright>=1.1
    - pytest>=7.4
    - pytest-asyncio>=0.23
    - pytest-cov>=4.1
    - ruff>=0.6

    # Safety: Pin protobuf to prevent TensorFlow/ONNX conflicts
    - protobuf>=3.20,<5.0