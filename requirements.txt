# --- Core Numerics ---
numpy
scipy

# --- Audio ---
soundfile
sounddevice

bitsandbytes; sys_platform == "linux"
mlx; sys_platform == "darwin" and platform_machine == "arm64"
mlx-lm; sys_platform == "darwin" and platform_machine == "arm64"

# --- LLM & GenAI ---
outlines
instructor
llama-cpp-python; platform_machine != "arm64" and sys_platform != "win32"

transformers>=4.57.0,<5
tokenizers>=0.20.0
sentencepiece
huggingface_hub>=0.20
litellm
json-repair

# --- Embeddings ---
# Note: sentence-transformers pulls in Torch.
# Torch works on both Mac and Linux via PyPI, so no special markers needed.
sentence-transformers
scikit-learn
torch
# CLAP audio-embedding lookup (for fast_heavy model)
laion-clap
torchvision

# --- UI ---
textual>=0.58
textual-serve>=1.0
rich
pywebview>=4.4
# System tray support (Mac only)
rumps>=0.4; sys_platform == "darwin"
pyinstaller

# --- Utils ---
dependency-injector>=4.42
pyperclip>=1.8
python-dotenv
# uvloop is fast but doesn't support Windows (safe for Mac/Linux)
uvloop; sys_platform != "win32"

# --- Dev / Maintenance ---
# CRITICAL: Must be listed so pip-sync doesn't uninstall itself
pip-tools
pyright>=1.1
pytest>=7.4
pytest-asyncio>=0.23
pytest-cov>=4.1
ruff>=0.6

# --- Safety ---
protobuf>=3.20,<5.0
